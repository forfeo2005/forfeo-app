<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Entreprise</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .premium-banner { background: #1a1a1a; color: white; border-radius: 15px; padding: 25px; }
        .forfy-box { background: #eef6ff; border: 1px dashed #0d6efd; border-radius: 10px; padding: 15px; }
    </style>
</head>
<body class="bg-light">
    <div class="container py-4">
        <div class="premium-banner mb-4">
            <h4>Statut : <%= isPremium ? 'ðŸ’Ž Membre Premium' : 'Membre Standard' %></h4>
            <p>Bienvenue, <%= userName %></p>
        </div>

        <div class="row g-4">
            <div class="col-lg-4">
                <div class="bg-white p-4 rounded shadow-sm">
                    <h5 class="fw-bold mb-3">Publier une Mission</h5>
                    <div class="forfy-box mb-3">
                        <small class="fw-bold text-primary">Assistant Forfy IA</small>
                        <select id="typeF" class="form-select form-select-sm my-2">
                            <option value="Restaurant">Restaurant</option>
                            <option value="Boutique">Boutique</option>
                        </select>
                        <button onclick="demanderForfy()" id="btnF" class="btn btn-primary btn-sm w-100">RÃ©diger avec Forfy</button>
                    </div>
                    <form action="/creer-mission" method="POST">
                        <input type="text" name="titre" class="form-control mb-2" placeholder="Titre" required>
                        <textarea name="description" id="descF" class="form-control mb-2" rows="4" required></textarea>
                        <input type="text" name="recompense" class="form-control mb-2" placeholder="RÃ©compense" required>
                        <button type="submit" class="btn btn-primary w-100">LANCER LA MISSION</button>
                    </form>
                </div>
            </div>

            <div class="col-lg-8">
                <h5 class="fw-bold mb-3">Nos Forfaits</h5>
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card p-3 shadow-sm border-primary">
                            <h6>Croissance (49$/mois)</h6>
                            <form action="/create-checkout-session" method="POST">
                                <input type="hidden" name="priceId" value="price_1QauKxJ0e1pCFddP0u2O6B5z">
                                <button type="submit" class="btn btn-primary btn-sm w-100 mt-2">S'abonner</button>
                            </form>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card p-3 shadow-sm border-dark">
                            <h6>Excellence (99$/mois)</h6>
                            <form action="/create-checkout-session" method="POST">
                                <input type="hidden" name="priceId" value="price_1QauLyJ0e1pCFddP9W2R7Y1X">
                                <button type="submit" class="btn btn-dark btn-sm w-100 mt-2">S'abonner</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    async function demanderForfy() {
        const res = await fetch('/forfy/generer-mission', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ typeEtablissement: document.getElementById('typeF').value })
        });
        const data = await res.json();
        document.getElementById('descF').value = data.description;
    }
    </script>
    <script src="/js/forfy-brain.js"></script>
</body>
</html>
